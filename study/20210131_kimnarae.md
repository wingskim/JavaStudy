스터디 일자
------
2021-01-17

다음 스터디
-----
2021-01-24

수업내용
------

JDBC Driver : java와 데이터베이스를 이어주는 드라이버
jar파일 : 자바를 압축한 파일. 빌드하면 .java가 됨

DAO(data access object)의 유틸화

1.DaoUtil : DB접속. 클로즈
2.DBTest.java : main매소드
3.StudentModel : 하나의 테이블과 모델이 1:1매핑되는 관계. insert할 때도 이 모델에 넣어서 함. 오알맵퍼(?)를 쓰면 자동으로 만들어줌

	private String studentId;
	private String studentName;
	private float height;
	private float weight;

	입력 후 setter getter 하면 자동으로 만들어줌 「ソース」-「getterおよびsetterの生成」-「全て選択」

4.StudentDao : DaoUtil 계승





build, jar,war
외부참조를 이용할 것.
: 변할 수 있는 값을 설정할 때는 -> 외부설정 -> 설정파일 -> 배치 -> 값을 읽어오게 만듦 -> 설정된 값을 사용


ctrl+shift+o :자동 임포트
혼자 공부한 내용

ctrl+/ :줄단위 주석
------


준비해올 것
---------
1. 스터디 내용 정리 후 커밋

```

--과제--
과제

일일 전기사용량에 대한 batch를 작성하라.

DB테이블 정보

  전기 사용구간별 요금표 테이블
    구간1(FROM) 구간2(TO) 요금(KW당)

  파일 처리 이력 테이블
    연번(seq) 파일이름 에러유무(0, 1) 에러내용 처리일

  일별 전기사용량 테이블
    전기사용고유ID 연월일(YYYYMMDD) 고객ID 디바이스ID  갱신자 갱신일 작성자 작성일

  월별 전기사용량 테이블
    연월(YYYYMM) 고객ID 총사용량 사용요금 갱신자 갱신일 작성자 작성일

  기기별 전기사용량 테이블
    연월(YYYYMM) 전기사용고유ID  고객ID 디바이스ID 총사용량 사용요금 사용요금(세금포함) 갱신자 갱신일 작성자 작성일

  기기ID마스터 테이블
    디바이스ID 디바이스이름

  고객마스터 테이블
    고객ID 고객이름

1. 다음과 같은 전기사용량 파일이 임의폴더에 놓여지면 처리를 시작하라.
(처리후에는 다시 N초간격으로 체크한다.)
(파일이 존재하지 않을경우, N초 간격으로 파일의 존재를 체크한다.)  // 다른파일이나 에러발생 시 처리 방법
※N초:setting.properties파일에서 취득    	         // while로

  파일패스 : setting.properties파일에서 취득
  파일이름 : YYYYMMDD_고객아이디.tsv
    ※고객아이디 : 숫자 12자리
  구별문자 : tab
  헤더 : 없음
  항목1 : 전기사용디바이스ID
  항목2 : 전기 사용량

  비고 : 0시부터 24시까지 1일당 디바이스별 전기사용량을 tsv파일에 기재(복수행)

2. 고객마스터ID존재체크
  고객마스터테이블에 고객ID가 존재하지 않으면 에러로그를 작성하고 N초간격으로 대기한다..

3. 테이블 갱신
  해당 데이터를 일별 전기사용량 테이블에INSERT한다 (전기사용 고유ID가 겹치는경우는 UPDATE)
  해당 데이터를 기기별 전기사용량 테이블에 INSERT한다. (전기사용 고유ID가 겹치는경우는 누계를 UPDATE한다.)

※ 위 과제설명을 기본설계라고 칭한다.
※ 위 설계서에는 함정(틀린부분)이 몇개 있습니다. 수정해주세요.


과제2
  기본설계를 바탕으로
  ・상세설계서
  ・DB설계서, DDL, 초기데이터DML
  ・파일 (입출력)설계서
  를 작성한다. 파일 샘플은 document폴더 참조(추후 추가예정)


과제3
월별 전기사용량에 대한 batch를 작성하라.
각 처리시 로깅을 기본적으로 실시한다.

1. 기동시
  ・기동일시가 1일이 아닌경우 정상종료후 로그를 남긴다.
  ・전기 사용구간별 요금표 테이블을 검색하여 구간정보(FROM - TO가 이어지지않을경우)가 이상한경우 에러로깅처리를 실행하고 프로그램을 종료한다.

2. 월별 전기사용량 시작
  ・일별 전기사용량  테이블으로부터 기동일의 전달데이터를 읽어, 1달간의 고객별 사용량을 구한다.
  ・전기 사용구간별 요금표 테이블을 기준으로 고객별사용량의 전기요금을 구한다.
  ・세금은 10%로 한다.
  ・계산된 전기요금을 월별 전기사용량 테이블에 INSERT한다. 해당월이 이미 존재하는경우, 경고로그를 기록하고 DELETE후 INSERT한다.

3. 처리종료


```

공부해올 것
--------

개인목표
-------
매일 커밋해서 풀밭으로 만들기

